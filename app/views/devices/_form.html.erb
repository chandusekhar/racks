<% if @device.errors.any? %>
<div id="error_explanation">
	<h2><%= pluralize(@device.errors.count, "error") %> prohibited this device from being saved:</h2>

	<ul>
		<% @device.errors.full_messages.each do |msg| %>
		<li><%= msg %></li>
		<% end %>
	</ul>
</div>
<% end %>
<fieldset style="float:left">
	<legend>The device</legend>
  	<div class="field">
    	<%= form.label :company_id %><br />
    	<%= form.text_field :company_id %>
  	</div>
  	<div class="field">
    	<%= form.label :device_type %><br />
    	<%= form.select :device_type, Device::DeviceType.to_select %>
  	</div>
  	<div class="field">
    	<%= form.label :name %><br />
    	<%= form.text_field :name %>
  	</div>
  	<div class="field">
    	<%= form.label :comment %><br />
    	<%= form.text_area :comment %>
  	</div>
</fieldset>
<fieldset style="float:left">
	<legend>Interfaces</legend>
	<table>
		<%= form.fields_for :interfaces do |interface_form| %>
		<tr>
			<td class="field">
				<%= interface_form.select :interface_type, Interface::InterfaceType.to_select %>
			</td>
			<td class="field">
				<%= interface_form.text_field :name %>
			</td>
			<td>
				<% unless interface_form.object.new_record? %>
					<%= interface_form.hidden_field :id %>	
					<%= interface_form.check_box :_destroy %>
					<%= interface_form.label :_destroy, 'Remove' %>
				<% end %>
			</td>
			<td>
				<%= interface_form.select :connected_to, ServerRack.find(params[:server_rack_id]).interfaces.map {|i| [i.to_s, i.id]},{:prompt => 'Connect this interface?', :selected => (interface_form.object.cable_connection.other_interface(interface_form.object).id if interface_form.object.cable_connection)} %>
			</td>
			<td>
				<%= interface_form.text_field :cable_connection_color, :value => (interface_form.object.cable_connection.color if interface_form.object.cable_connection)  %>
			</td>
		</tr>
		<% end %>
	</table>
	<%= link_to 'Add Interface' %>

</fieldset>

